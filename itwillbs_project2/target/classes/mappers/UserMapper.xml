<?xml version="1.0" encoding="UTF-8"?>
<!-- /mappers/memberMapper.xml -->
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<!--    namespace정보는 외부에서 해당 mapper(xml)를 찾을 수 있는 이름 -->
  <mapper namespace="com.project2.mapper.UserMapper">
  
  <insert id="insertUser">
  	insert into c6d2305t2_2.userTable
  	(user_id,user_pw,user_name,user_phone) 
  	values(#{user_id},#{user_pw},#{user_name},#{user_phone})
  </insert>
  
  <!-- 아이디 중복체크 -->
  <select id = "idCheck" resultType="int">
  	select count(*) from c6d2305t2_2.userTable
  	where user_id = #{user_id}
  </select>
  
  
  <!-- 휴대폰 중복체크 -->
  <select id = "phoneCheck" resultType="int">
  	select count(*) from c6d2305t2_2.userTable             
  	where user_phone = #{user_phone}
  </select>
  
  <select id="loginUser" resultType="com.project2.domain.UserVO">
  	select * from c6d2305t2_2.userTable
  	where user_id=#{user_id} and user_pw=#{user_pw}
  </select>
  
    <select id="getUser" resultType="UserVO">
        select * from c6d2305t2_2.userTable 
        where user_id=#{user_id}   
   </select>
   
   <update id="updateUser">
     update c6d2305t2_2.userTable set user_pw=#{user_pw}, 
     user_name=#{user_name}, user_phone=#{user_phone}, user_regdate=now()
     where user_id=#{user_id} and user_pw=#{user_pw}
   </update>
   
   <delete id="deleteUser">
      delete from c6d2305t2_2.userTable 
      where user_id=#{user_id} and user_pw=#{user_pw}   
   </delete>  
   
   <!-- 회원 리스트 페이징 처리 추가 -->
   <select id="getUserList" resultType="UserVO">
     select * from c6d2305t2_2.userTable 
     limit #{pageStart}, #{pageSize}
   </select>
   
   <!-- 전체 회원 수 -->
   <select id="UserCount" resultType="int">
   	<![CDATA[
   		select count(*) from c6d2305t2_2.userTable 
   		where user_num > 0
   	]]>   
   </select>
   

	<!-- 회원등급 변경 -->
	<select id="getUserByUserId" resultType="UserVO">
		SELECT * FROM userTable WHERE user_id = #{user_id}
	</select>
	<update id="updateUserGrade">
		UPDATE userTable
		SET user_type = #{user_type}
		WHERE user_id = #{user_id}
	</update>
	<!-- 아이디찾기 -->
	<select id="findUserByNameAndPhone"
		resultType="com.project2.domain.UserVO">
		SELECT user_id
		FROM userTable
		WHERE user_name = #{user_name} AND user_phone = #{user_phone}
	</select>
    
    <!-- 신고 목록 조회 -->
    <select id="reportList" resultType="ReportVO">
    	select * from c6d2305t2_2.user_report
    	limit #{pageStart}, #{pageSize}
    </select>
    <!-- 신고목록 전체 -->
    <select id="reportCount" resultType="int">
    	<![CDATA[
    		select count(*) from c6d2305t2_2.user_report
    		where report_num
    	]]>
    </select>
  
  
  
  
  </mapper>